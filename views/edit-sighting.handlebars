{{> nav-bar }}

<div class="container">
    <div class="row">
        <h2 class="center-align">Edit a Sighting</h2>
        <form class="col s8">
            {{!-- Hidden input to store sighting ID --}}
            <div class="row hide">
                <input type="text" data-id="{{sighting.dataValues.id}}" id="sighting-id">
            </div>
    </div>
    <div class="row">
        <i class="material-icons prefix">add_a_photo</i>
        <button id="upload_widget" class="btn bird-btn">Changed the photo</button>
        <span class="hide" id="successMessage">Upload was sucessful!</span>
        <span class="hide" id="failMessage">Upload failed!</span>
    </div>
    <div class="input-field row">
        <i class="material-icons prefix">people</i>
        <select id="user_select">
            <option value={{sighting.dataValues.User.id}} data-score={{sighting.dataValues.User.score}}>{{sighting.dataValues.User.user_name}}</option>
            {{#each users}}
            <option value={{dataValues.id}} data-score={{dataValues.score}}>{{dataValues.user_name}}</option>
            {{/each}}
        </select>
    </div>
    <div class="input-field row">
        <i class="material-icons prefix"><i class="fas fa-crow fa-sm"></i></i>
        <select id="bird_select">
            <option value={{sighting.dataValues.Bird.id}} data-points={{sighting.dataValues.Bird.points}}>{{sighting.dataValues.Bird.common_name}}</option>
            {{#each birds}}
            <option value={{dataValues.id}} data-points={{dataValues.points}}>{{dataValues.common_name}}</option>
            {{/each}}
        </select>

    </div>
    <div class="row">
        <div class="input-field col-12">
            <i class="material-icons prefix">add_location</i>
            <textarea id="location" class="materialize-textarea">{{sighting.dataValues.location}}</textarea>
            <label for="location">Enter a location</label>
        </div>
    </div>
    <div class="row">
        <div class="input-field col-12">
            <i class="material-icons prefix">mode_edit</i>
            <textarea id="comments" class="materialize-textarea">{{sighting.dataValues.comments}}</textarea>
            <label for="comments">Comments</label>
        </div>
    </div>

    <div class="row">
        <button class="btn bird-btn" id="update">Update your sighting!</button>
    </div>
    </form>
    <div class="col s4" id="image-preview">
        <div class="row center-align">
            <i class="material-icons prefix">photo_camera</i>
            {{#if sighting.dataValues.image_URL}}
            <p id="uploaded-image"><img src="{{sighting.dataValues.image_URL}}" /></p>
            {{else}}
            <p id="uploaded-image">No imaged uploaded</p>
            {{/if}}

        </div>
    </div>
</div>


<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
<script src="/assets/js/edit-sighting.js"></script>